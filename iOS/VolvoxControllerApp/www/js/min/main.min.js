var app=app||{};app.main=function(){var n=1,o=function(){FastClick.attach(document.body),window.location.hash="/locations",t()},t=function(){routie({"/locations":function(){console.log("Page: locations"),a(n,{tpl:"tpl-locations",header:"Location"})},"/locations/:place":function(o){console.log("Page: locations/"+o),a(n,{tpl:"tpl-place",header:o,place:o,back:!0})},"/locations/:place/:resort":function(o,t){console.log("Page: locations/"+o+"/"+t),a(n,{tpl:"tpl-resort",header:t,place:o,resort:t,back:!0})}})},a=function(n,o){var t=$("#"+o.tpl).html(),a=_.template(t,{header_title:o.header});$.ajax({url:"http://apon.local:3000/getLocation",data:{place:o.place||null,resort:o.resort||null},success:function(){$("#view").html(a)},error:function(){$("#view").html(a)}}),e()},e=function(){console.log("attaching events"),$(".page").off("webkitTransitionEnd").one("webkitTransitionEnd",function(){$(this).addClass("end")}),$(".end").off("webkitTransitionEnd").one("webkitTransitionEnd",function(){$(this).remove()})};return{init:o}}(),$.os.ios?$(document).on("deviceready",app.main.init):app.main.init();